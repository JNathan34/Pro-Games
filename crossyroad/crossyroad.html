<!DOCTYPE html>
<html lang="en">

<head>
  <title>Crossy Road</title>
  <!-- App favicon -->
  <link rel="apple-touch-icon" href="https://codetap.org/assets/img/favicon.png">
  <link rel="icon" type="image/png" href="https://codetap.org/assets/img/favicon.png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
</head>

<body>

  <!-- SESSION TIMER -->
  <div id="sessionTimer" style="
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(0, 255, 153, 0.85);
    color: #000;
    padding: 8px 12px;
    font-size: 16px;
    font-weight: bold;
    border-radius: 8px;
    z-index: 999999;
    font-family: Arial, sans-serif;">
    Session: 60:00
  </div>

  <div id="counter">0</div>

  <div id="controlls">
    <div>
      <button id="forward">
        <svg width="30" height="30" viewBox="0 0 10 10">
          <g transform="rotate(0, 5,5)">
            <path d="M5,4 L7,6 L3,6 L5,4" />
          </g>
        </svg>
      </button>
      <button id="left">
        <svg width="30" height="30" viewBox="0 0 10 10">
          <g transform="rotate(-90, 5,5)">
            <path d="M5,4 L7,6 L3,6 L5,4" />
          </g>
        </svg>
      </button>
      <button id="backward">
        <svg width="30" height="30" viewBox="0 0 10 10">
          <g transform="rotate(180, 5,5)">
            <path d="M5,4 L7,6 L3,6 L5,4" />
          </g>
        </svg>
      </button>
      <button id="right">
        <svg width="30" height="30" viewBox="0 0 10 10">
          <g transform="rotate(90, 5,5)">
            <path d="M5,4 L7,6 L3,6 L5,4" />
          </g>
        </svg>
      </button>
    </div>
  </div>

  <div id="end">
    <button id="retry">Retry</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/99/three.min.js"></script>
  <script src="script.js"></script>

  <!-- SESSION TIMER SCRIPT -->
  <script>
    const countdownEl = document.getElementById("sessionTimer");

    function logout() {
      localStorage.removeItem("authenticated");
      localStorage.removeItem("authExpires");
      window.location.href = "index.html";
    }

    function updateTimer() {
      const expires = parseInt(localStorage.getItem("authExpires"), 10);
      const auth = localStorage.getItem("authenticated");

      if (!auth || !expires) {
        logout();
        return;
      }

      const now = Date.now();

      if (now > expires) {
        logout();
        return;
      }

      const remaining = expires - now;
      const minutes = Math.floor(remaining / 1000 / 60);
      const seconds = Math.floor((remaining / 1000) % 60);

      countdownEl.textContent =
        `Session: ${minutes.toString().padStart(2,'0')}:` +
        `${seconds.toString().padStart(2,'0')}`;
    }

    setInterval(updateTimer, 1000);
    updateTimer();
  </script>

</body>

</html>
