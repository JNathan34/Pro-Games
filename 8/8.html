<!-- Ultimate Game Stash file--> 
<!-- For the regularly updating doc go to https://docs.google.com/document/d/1_FmH3BlSBQI7FGgAQL59-ZPe8eCxs35wel6JUyVaG8Q/ -->

<html>

<head>
  <base href="https://cdn.jsdelivr.net/gh/bubbls/youtube-playables@main/8-ball-classic/">
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta content="utf-8" http-equiv="encoding">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui" />

  <title>8 Ball Billiards Classic</title>

  <style>
    html,
    body {
      background: #000000;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/gh/bubbls/youtube-playables@main/ytgame.js" nonce="2XFlLX0mBCyFgnEmy26FZg"></script>
  <script nonce="2XFlLX0mBCyFgnEmy26FZg">
    ytgame.game.firstFrameReady();
  </script>

  <script nonce="2XFlLX0mBCyFgnEmy26FZg">
    window.famobi_gameID = "8-ball-billiards-classic";
    window.famobi_gameJS = [
      "assets/src/01phaser.js",
      "assets/src/02Ball.js",
      "assets/src/03contactListener.js",
      "assets/src/04billiardPhysics.js",
      "assets/src/05levelData.js",
      "assets/src/06maths.js",
      "assets/src/07vector2d.js",
      "assets/src/08render.js",
      "assets/src/09sound.js",
      "assets/src/10effects.js",
      "assets/src/11timer.js",
      "assets/src/12load.js",
      "assets/src/13mainMenu.js",
      "assets/src/14setup.js",
      "assets/src/15gameController.js",
      "assets/src/16boot.js",
      function() {

      }
    ];
    (function(document, url, fgJS, firstJS) {
      fgJS = document.createElement('script');
      firstJS = document.getElementsByTagName('script')[0];
      fgJS.src = url + "";
      firstJS.parentNode.insertBefore(fgJS, firstJS);
    })(document, 'html5games/gameapi/v1.js');
  </script>
</head>

<body>
  <center>
    <div id="mygame"></div>
  </center>


<!-- ✅ ONLY ADDED CODE BELOW — ORIGINAL CODE ABOVE IS 100% UNTOUCHED -->


<!-- SESSION TIMER BOX -->
<div id="sessionTimer" style="
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(0,255,153,0.9);
    color: #000;
    padding: 8px 12px;
    font-size: 16px;
    font-weight: bold;
    border-radius: 8px;
    z-index: 999999999;
    font-family: Arial, sans-serif;">
    Session: 60:00
</div>

<!-- SESSION TIMER SCRIPT -->
<script>
const timerBox = document.getElementById("sessionTimer");

function logout() {
    localStorage.removeItem("authenticated");
    localStorage.removeItem("authExpires");
    window.location.href = "index.html";
}

function updateTimer() {
    const expires = parseInt(localStorage.getItem("authExpires"), 10);
    const auth = localStorage.getItem("authenticated");

    if (!auth || !expires) {
        logout();
        return;
    }

    const now = Date.now();

    if (now > expires) {
        logout();
        return;
    }

    const remaining = expires - now;
    const minutes = Math.floor(remaining / 1000 / 60);
    const seconds = Math.floor((remaining / 1000) % 60);

    timerBox.textContent =
        `Session: ${minutes.toString().padStart(2,'0')}:` +
        `${seconds.toString().padStart(2,'0')}`;
}

setInterval(updateTimer, 1000);
updateTimer();
</script>


</body>
</html>
