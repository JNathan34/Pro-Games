<!-- Ultimate Game Stash file--> 
<!doctype html>
<html lang="en">

<head>
    <base href="https://cdn.jsdelivr.net/gh/bubbls/youtube-playables@main/chess-classic/">
    <meta charset="UTF-8" />
    <meta name="viewport"
        content="width=device-width,height=device-height,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" />
    <title>Chess Classic</title>
    <link rel="stylesheet" href="assets/css/styles.css" nonce="l8W__iZ7xgOF2sxYxPrsbQ">

    <script src="https://cdn.jsdelivr.net/gh/bubbls/youtube-playables@main/ytgame.js" nonce="l8W__iZ7xgOF2sxYxPrsbQ"></script>
    <script nonce="l8W__iZ7xgOF2sxYxPrsbQ">ytgame.game.firstFrameReady();</script>

    <!-- ---------------- API Snippet ---------------- -->
    <script nonce="l8W__iZ7xgOF2sxYxPrsbQ">
        window.famobi_gameID = "chess-classic"; 
        window.famobi_gameJS = [
            "vendors.bundle.js",
            "main.bundle.js"
        ];
        (function (document, url, fgJS, firstJS) {
            fgJS = document.createElement('script');
            firstJS = document.getElementsByTagName('script')[0];
            fgJS.src = url + "";
            firstJS.parentNode.insertBefore(fgJS, firstJS);
        })(document, 'html5games/gameapi/v1.js');         
    </script>
    <!-- ---------------- API Snippet end ------------- -->

</head>

<body>

    <!-- ✅ SESSION TIMER FROM DRIVE MAD -->
    <div id="sessionTimer" style="
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 255, 153, 0.85);
        color: #000;
        padding: 8px 12px;
        font-size: 16px;
        font-weight: bold;
        border-radius: 8px;
        z-index: 999999;
        font-family: Arial, sans-serif;">
        Session: 60:00
    </div>

    <div id="preloader">
        <div id="loading-text"></div>
        <div class="lds-default">
            <div></div><div></div><div></div><div></div><div></div><div></div>
            <div></div><div></div><div></div><div></div><div></div><div></div>
        </div>
    </div>

    <div id="game-container"></div>

    <!-- ✅ SESSION TIMER SCRIPT -->
    <script>
        const countdownEl = document.getElementById("sessionTimer");

        function logout() {
            localStorage.removeItem("authenticated");
            localStorage.removeItem("authExpires");
            window.location.href = "index.html";
        }

        function updateTimer() {
            const expires = parseInt(localStorage.getItem("authExpires"), 10);
            const auth = localStorage.getItem("authenticated");

            if (!auth || !expires) {
                logout();
                return;
            }

            const now = Date.now();

            if (now > expires) {
                logout();
                return;
            }

            const remaining = expires - now;
            const minutes = Math.floor(remaining / 1000 / 60);
            const seconds = Math.floor((remaining / 1000) % 60);

            countdownEl.textContent =
                `Session: ${minutes.toString().padStart(2,'0')}:` +
                `${seconds.toString().padStart(2,'0')}`;
        }

        setInterval(updateTimer, 1000);
        updateTimer();
    </script>

</body>
</html>
